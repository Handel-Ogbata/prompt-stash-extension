<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Prompt Stash - Save, copy and insert your prompts quickly with Google Drive sync" />
  <link rel="stylesheet" href="style.css" />
  <title>Prompt Stash</title>
</head>
<body>
  <div class="container">
    <header>
      <h1>Prompt Stash</h1>
      <div id="auth-status" class="auth-status" role="status" aria-live="polite">
        <div id="auth-loading" class="auth-loading">Connecting to Google Drive...</div>
        <div id="auth-error" class="auth-error" style="display: none;">Authentication failed. Please try again.</div>
        <div id="auth-success" class="auth-success" style="display: none;">Connected to Google Drive</div>
      </div>
    </header>
    
    <div class="controls">
      <button id="addPromptBtn" class="btn btn-primary" aria-label="Add new prompt">
        <svg class="btn-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Add New Prompt
      </button>
      <div class="controls-secondary">
        <button id="exportBtn" class="btn btn-secondary" aria-label="Export prompts as JSON">
          <svg class="btn-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7,10 12,15 17,10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Export JSON
        </button>
        <button id="refreshBtn" class="btn btn-secondary" aria-label="Refresh prompts from Google Drive">
          <svg class="btn-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23,4 23,10 17,10"></polyline>
            <polyline points="1,20 1,14 7,14"></polyline>
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
          </svg>
          Refresh
        </button>
      </div>
    </div>

    <div class="search-container">
      <label for="searchInput" class="sr-only">Search prompts</label>
      <input 
        id="searchInput" 
        type="text" 
        placeholder="Search prompts by name..." 
        aria-label="Search prompts by name"
      />
    </div>

    <main id="list" role="main" aria-label="Prompts list"></main>
  </div>

  <!-- Modal for adding new prompts -->
  <div id="promptModal" class="modal" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title">Add New Prompt</h3>
        <button class="close" aria-label="Close modal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="promptForm">
          <div class="form-group">
            <label for="name">Prompt Name</label>
            <input 
              id="name" 
              type="text" 
              placeholder="Enter prompt name" 
              required 
              aria-required="true"
            />
          </div>
          <div class="form-group">
            <label for="text">Prompt Text</label>
            <textarea 
              id="text" 
              rows="4" 
              placeholder="Enter your prompt text..." 
              required 
              aria-required="true"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="tags">Tags (comma separated)</label>
            <input 
              id="tags" 
              type="text" 
              placeholder="e.g., work, personal, ai" 
            />
          </div>
          <div class="modal-actions">
            <button type="submit" id="saveBtn" class="btn btn-primary">Save Prompt</button>
            <button type="button" id="cancelBtn" class="btn btn-secondary">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="drive-api.js"></script>
  <script src="popup.js"></script>
</body>
</html>
